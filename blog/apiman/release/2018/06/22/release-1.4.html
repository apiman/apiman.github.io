<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="msvalidate.01" content="C3BF2C67B92C75F2DEAA096973652038" />
  <link rel="shortcut icon" href="https://www.apiman.io/latest/resources/images/favicon.ico">
  <title>Version 1.4 of Apiman is released! | apiman Open Source API Management</title>
  <meta name="description" content="I&#8217;m delighted to announce that Apiman 1.4 has been released (actually, 1.4.1.Final as of this blog post [1]).The most important change in this release ...">

  <!-- CSS -->
  <link href="https://www.apiman.io/latest/resources/bootstrap-3.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://www.apiman.io/latest/resources/patternfly-1.0.5/css/patternfly.min.css" rel="stylesheet">
  <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet">
  <link href="https://www.apiman.io/latest/resources/css/apiman-web.css?v=1.2.7.Final" rel="stylesheet">
  <link href="https://www.apiman.io/latest/resources/css/apiman-web.responsive.css?v=1.2.7.Final" rel="stylesheet">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/blog/css/highlight.css" rel="stylesheet">
  <link href="/blog/css/main.css" rel="stylesheet">
  <link href="/blog/css/coderay-asciidoctor.css" rel="stylesheet">


  <!-- Scripts -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script src="https://www.apiman.io/latest/resources/jquery-1.11.1/js/jquery.min.js"></script>
  <script src="https://www.apiman.io/latest/resources/bootstrap-3.3.0/js/bootstrap.min.js"></script>
  <script id="dsq-count-scr" src="//apiman.disqus.com/count.js" async></script>

  <!-- Canonical URL --><link rel="canonical" href="https://apiman.io/blog/apiman/release/2018/06/22/release-1.4.html"><link rel="alternate" type="application/rss+xml" title="Apiman Blog | Open Source API Management" href="https://apiman.io/blog/feed.xml" />


  <!-- Google Analytics -->
  <script>
    $(document).ready(function() {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-56678850-1', 'auto');
      ga('send', 'pageview');
    });
  </script>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
</head>
<body class="blog"><nav id="top-nav" class="navbar navbar-inverse" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.apiman.io/latest/index.html">apiman</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="top-menu-item menu-item"><a href="https://www.apiman.io/latest/index.html">Overview</a></li>
        <li class="top-menu-item menu-item"><a href="https://www.apiman.io/latest/download.html">Download</a></li>
        <li class="top-menu-item menu-item"><a href="https://www.apiman.io/latest/roadmap.html">Roadmap</a></li>
        <li class="top-menu-item menu-item active"><a href="https://www.apiman.io/blog/">Blog</a></li>
        <li class="top-menu-item menu-item dropdown">
            <a href="" class="dropdown-toggle" data-toggle="dropdown">Get Involved<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li class="menu-item">
                    <a href="https://github.com/apiman/apiman/issues">Report a Bug</a>
                </li>
                <li class="menu-item">
                    <a href="https://twitter.com/apiman_io" rel="nofollow" target="_blank">Twitter Feed</a>
                </li>
                <li class="divider"></li>
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/contributors.html">Contributors List</a>
                </li>
            </ul>
        </li>
        <li class="top-menu-item menu-item dropdown">
            <a href="" class="dropdown-toggle" data-toggle="dropdown">Learn More<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/tutorials.html">Tutorials &amp; Walkthroughs</a>
                </li>
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/crash-course.html">Crash Course!</a>
                </li>
                <li class="divider"></li>
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/installation-guide.html">Installation Guide</a>
                </li>
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/user-guide.html">User Guide</a>
                </li>
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/developer-guide.html">Developer Guide</a>
                </li>
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/production-guide.html">Production Guide</a>
                </li>
                <li class="divider"></li>
                <li class="menu-item">
                    <a href="https://www.apiman.io/latest/api-manager-restdocs.html">API Manager REST Endpoints</a>
                </li>
            </ul>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>
<div class="container" id="blog">
      <div class="blog-content">
        <div class="post">
  <header class="post-header" style="margin-top: 25px">
    <h1 style="color: #666; font-weight: bold" class="post-title section-header">Version 1.4 of Apiman is released!</h1>
    <span style="color: #243446; font-size: 13px"><i class="fa fa-calendar"></i> Jun 22, 2018</span>
    <span style="color: #243446; margin-left: 15px; font-size: 13px"><i class="fa fa-user"></i> <a href="https://github.com/msavy">Marc Savy</a></span>
    <span style="color: #243446; margin-left: 15px; font-size: 13px"><i class="fa fa-tags"></i> apiman and release</span>
  </header><article class="post-content"
           style="margin-top: 20px; font-size: 14px; line-height: 20px">
    <div class="paragraph">
<p>I’m delighted to announce that Apiman 1.4 has been released (actually, 1.4.1.Final as of this blog post <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>).</p>
</div>
<div class="paragraph">
<p>The most important change in this release is that we’ve upgraded support for Elasticsearch from 1.x to 5.x. It may also support Elasticsearch 2.x, but this isn’t officially supported (let us know your experiences).</p>
</div>
<div class="paragraph">
<p>A significant number of changes across the ES platform were needed to bring this improvement; including in Apiman Gateway, Apiman Manager, Apiman Metrics, test harnesses, and the ES distribution.</p>
</div>
<div class="paragraph">
<p>If you experience any issues, please report them to us via <a href="https://issues.jboss.org/browse/APIMAN/" target="_blank" rel="nofollow">JIRA</a>, <a href="https://github.com/apiman/apiman" target="_blank" rel="nofollow">GitHub</a>, or <a href="https://lists.jboss.org/mailman/listinfo/apiman-user" target="_blank" rel="nofollow">the mailing list</a>.</p>
</div>
<div class="sect1">
<h2 id="upgrading">Upgrading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Depending on your approach, to upgrade you can simply use Apiman’s <a href="https://www.apiman.io/blog/apiman/introduction/overview/backup/export/import/2016/01/27/export-import.html">export-import feature</a>, or upgrade the indices by following Elasticsearch’s upgrade guides (likely trickier; I recommend export-import).</p>
</div>
<div class="paragraph">
<p>We also now launch and manage ES in a significantly different way than previously (as an external process), as the <a href="https://www.elastic.co/blog/elasticsearch-the-server" target="_blank" rel="nofollow">old method is no longer supported</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="policies-can-suppressallow-headers-in-connectors">Policies can suppress/allow headers in connectors.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A new function has been added to <code>IPolicyContext</code> which enables policy authors to explicitly suppress or allow headers that may otherwise have different treatment by default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">IConnectorConfig getConnectorConfiguration();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using <code>IConnectorConfig</code> a policy author may explicitly override the connector’s default filtering of headers. These may vary slightly by platform, but generally would by default filter out headers such as <code>X-Api-Key</code>. This is applied at the <strong>end of the policy chain</strong> right before the connection is established.</p>
</div>
<div class="paragraph">
<p>This feature is useful to unblock certain headers that may otherwise be disallowed, or block headers in such a way that it would even apply to subsequent policies.</p>
</div>
<div class="paragraph">
<p>Here’s an example, using the <code>suppressRequestHeader</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">void</span> doApply(ApiRequest request, IPolicyContext context, ...) {
    <span class="comment">// Get connector config</span>
    IConnectorConfig connectorConfig = context.getConnectorConfiguration();

    <span class="comment">// Ban header. Connector will filter this out.</span>
    connectorConfig.suppressRequestHeader(<span class="string"><span class="delimiter">"</span><span class="content">X-SECRET</span><span class="delimiter">"</span></span>);
    <span class="local-variable">super</span>.doApply(request, context, config, chain);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even if another policy in the chain added an <code>X-SECRET</code> header, it would still be filtered out <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>We hope to expand the functionality of <code>IConnectorConfig</code> in future to allow more control of the connector by policies than is possible presently.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="download-1-4-1-final">Download 1.4.1.Final</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://downloads.jboss.org/apiman/1.4.1.Final/apiman-distro-vertx-1.4.1.Final.zip" target="_blank" rel="nofollow">Vert.x (Gateway Only)</a></p>
</li>
<li>
<p><a href="https://downloads.jboss.org/apiman/1.4.1.Final/apiman-distro-wildfly10-1.4.1.Final-overlay.zip" target="_blank" rel="nofollow">WildFly 10 or EAP 7.1</a></p>
</li>
<li>
<p><a href="https://downloads.jboss.org/apiman/1.4.1.Final/apiman-distro-wildfly11-1.4.1.Final-overlay.zip" target="_blank" rel="nofollow">WildFly 11</a></p>
</li>
<li>
<p><a href="https://downloads.jboss.org/apiman/1.4.1.Final/apiman-distro-eap7-1.4.1.Final-overlay.zip" target="_blank" rel="nofollow">EAP 7</a></p>
</li>
<li>
<p><a href="https://downloads.jboss.org/apiman/1.4.1.Final/apiman-distro-tomcat8-1.4.1.Final-overlay.zip" target="_blank" rel="nofollow">Tomcat 8+</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes">Release Notes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12314121&amp;version=12337953" target="_blank" rel="nofollow">1.4.0.Final</a></p>
</li>
<li>
<p><a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12314121&amp;version=12338072" target="_blank" rel="nofollow">1.4.1.Final</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Enhancements</div>
<ul>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1334" target="_blank" rel="nofollow">APIMAN-1334</a> - Allow policies to suppress/allow headers in connector.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Bugs</div>
<ul>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1266" target="_blank" rel="nofollow">APIMAN-1266</a> - Error when adding plugin that has previously been deleted (Oracle 12C database)</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1296" target="_blank" rel="nofollow">APIMAN-1296</a> - The API Key policy plugin (apikey-policy) expects the requestHeader property to be all lowercase as of 1.3.1</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1318" target="_blank" rel="nofollow">APIMAN-1318</a> - Export/Import of a plugin with policies does not work because of its ID</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1320" target="_blank" rel="nofollow">APIMAN-1320</a> - Gateway API: Clients still inserted even when invalid</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1321" target="_blank" rel="nofollow">APIMAN-1321</a> - Elasticsearch data is deleted at tomcat shutdown</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1324" target="_blank" rel="nofollow">APIMAN-1324</a> - index_already_exists_exception when starting WF quickstart</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1335" target="_blank" rel="nofollow">APIMAN-1335</a> - ApiKeyPolicy from apikey-policy is throwing an NPE on null connectorConfig using the Vert.x gateway</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1337" target="_blank" rel="nofollow">APIMAN-1337</a> - SoapAuthorizationPolicy missing i18n messages</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Tasks</div>
<ul>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-892" target="_blank" rel="nofollow">APIMAN-892</a> - Upgrade to Elasticsearch 5.x</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Sub-tasks</div>
<ul>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1323" target="_blank" rel="nofollow">APIMAN-1323</a> - Rework test harness to cope better with out of order JSON</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1325" target="_blank" rel="nofollow">APIMAN-1325</a> - Upgrade Jest HTTP Client for ES</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1326" target="_blank" rel="nofollow">APIMAN-1326</a> - Upgrade Gateway to ES 5.x</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1327" target="_blank" rel="nofollow">APIMAN-1327</a> - Upgrade Manager to ES 5.x</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1328" target="_blank" rel="nofollow">APIMAN-1328</a> - Upgrade metrics to ES 5.x</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1329" target="_blank" rel="nofollow">APIMAN-1329</a> - Update test harness and tests to ES 5.x</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1330" target="_blank" rel="nofollow">APIMAN-1330</a> - Update QueryBuilders to ES 5.x</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1331" target="_blank" rel="nofollow">APIMAN-1331</a> - Switch to EmbeddedElastic instead of (actually) embedded</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1332" target="_blank" rel="nofollow">APIMAN-1332</a> - Update ES distro to include Elasticsearch distro zip</p>
</li>
<li>
<p><a href="https://issues.jboss.org/browse/APIMAN-1333" target="_blank" rel="nofollow">APIMAN-1333</a> - Handle EmbeddedElastic hanging process when JVM killed ungracefully.</p>
</li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<hr />
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. We fixed a couple of bugs spotted in 1.4.0.Final by the community before the blog was written
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Unless it explicitly overrode your suppression!
</div>
</div>
  </article><div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = '';
        this.page.identifier = '/apiman/release/2018/06/22/release-1.4';
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//apiman.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>

      </div>
      <div class="blog-footer"><footer role="contentinfo">
    <div id="inner-footer" class="clearfix row">
        <div id="widget-footer" class="clearfix">
            <hr>
            <div class="widget col-sm-6 col-md-6 widget_text">
                <div class="textwidget">
                    <p>
                        Copyright &copy; 2017 Red Hat, Inc. All rights reserved.<br>
                        apiman code is open source and released under <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="nofollow" target="_blank">Apache License, v2.0</a>.<br>
                        <a href="/latest/disclosure.html">Open Source Disclosure</a>
                    </p>
                </div>
            </div>
            <div class="widget col-sm-6 col-md-6 widget_text" style="text-align: right">
                <a href="https://www.redhat.com" rel="nofollow" target="_blank"><img src="https://static.jboss.org/theme/images/common/redhat_logo.png" alt="Red Hat"></a>
            </div>
        </div>
        <nav class="clearfix"></nav>
    </div>

    <!-- Adobe Analytics -->
    <script type="text/javascript">
      if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
      }
    </script>
</footer>
</div>
    </div>
  </body>
</html>
