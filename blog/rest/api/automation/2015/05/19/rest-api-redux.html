<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="msvalidate.01" content="C3BF2C67B92C75F2DEAA096973652038" />
  <link rel="shortcut icon" href="http://www.apiman.io/latest/resources/images/favicon.ico">
  <title>The JBoss apiman API Manager REST API | apiman Open Source API Management</title>
  <meta name="description" content="In this, the third article in our series on apiman, JBoss’ new open source API Management framework, we’ll examine apiman’s API Manager REST API. apiman’s Ma...">

  <!-- CSS -->
  <link href="http://www.apiman.io/latest/resources/bootstrap-3.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="http://www.apiman.io/latest/resources/patternfly-1.0.5/css/patternfly.min.css" rel="stylesheet">
  <link href="http://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet">
  <link href="http://www.apiman.io/latest/resources/css/apiman-web.css?v=1.2.3.Final" rel="stylesheet">
  <link href="http://www.apiman.io/latest/resources/css/apiman-web.responsive.css?v=1.2.3.Final" rel="stylesheet">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="/blog/css/highlight.css" rel="stylesheet">
  <link href="/blog/css/main.css" rel="stylesheet">
  <link href="/blog/css/coderay-asciidoctor.css" rel="stylesheet">


  <!-- Scripts -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  
  <script src="http://www.apiman.io/latest/resources/jquery-1.11.1/js/jquery.min.js"></script>
  <script src="http://www.apiman.io/latest/resources/bootstrap-3.3.0/js/bootstrap.min.js"></script>

  <!-- Canonical URL -->
    
    <link rel="canonical" href="http://apiman.io/blog/rest/api/automation/2015/05/19/rest-api-redux.html">
    

  <link rel="alternate" type="application/rss+xml" title="apiman Blog | Open Source API Management" href="http://apiman.io/blog/feed.xml" />


  <!-- Google Analytics -->
  <script>
    $(document).ready(function() {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-56678850-1', 'auto');
      ga('send', 'pageview');
    });
  </script>
</head>

  <body class="blog">
    <div id="rhbar">
      <a class="jbdevlogo" href="http://www.jboss.org/projects/about" rel="nofollow" target="_blank"></a>
      <a class="rhlogo" href="http://www.redhat.com/" rel="nofollow" target="_blank"></a>
    </div>
    <nav id="top-nav" class="navbar navbar-inverse" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.apiman.io/latest/index.html">apiman</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="top-menu-item menu-item"><a href="http://www.apiman.io/latest/index.html">Overview</a></li>
        <li class="top-menu-item menu-item"><a href="http://www.apiman.io/latest/download.html">Download</a></li>
        <li class="top-menu-item menu-item"><a href="http://www.apiman.io/latest/roadmap.html">Roadmap</a></li>
        <li class="top-menu-item menu-item active"><a href="http://www.apiman.io/blog/">Blog</a></li>
        <li class="top-menu-item menu-item dropdown">
            <a href="" class="dropdown-toggle" data-toggle="dropdown">Get Involved<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li class="menu-item">
                    <a href="https://issues.jboss.org/browse/APIMAN">Report a Bug</a>
                </li>
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/chat.html">Chat on IRC</a>
                </li>
                <li class="menu-item">
                    <a href="https://twitter.com/apiman_io" rel="nofollow" target="_blank">Twitter Feed</a>
                </li>
                <li class="menu-item">
                    <a href="https://lists.jboss.org/mailman/listinfo/apiman-user" rel="nofollow" target="_blank">Mailing List</a>
                </li>
                <li class="divider"></li>
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/contributors.html">Contributors List</a>
                </li>
            </ul>
        </li>
        <li class="top-menu-item menu-item dropdown">
            <a href="" class="dropdown-toggle" data-toggle="dropdown">Learn More<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/tutorials.html">Tutorials &amp; Walkthroughs</a>
                </li>
                <li class="divider"></li>
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/installation-guide.html">Installation Guide</a>
                </li>
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/user-guide.html">User Guide</a>
                </li>
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/developer-guide.html">Developer Guide</a>
                </li>
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/production-guide.html">Production Guide</a>
                </li>
                <li class="divider"></li>
                <li class="menu-item">
                    <a href="http://www.apiman.io/latest/api-manager-restdocs.html">API Manager REST Endpoints</a>
                </li>
            </ul>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>


    <div class="container" id="blog">
      <div class="blog-content">
        

<div class="post">
  <header class="post-header" style="margin-top: 25px">
    <h1 style="color: #666; font-weight: bold" class="post-title section-header">The JBoss apiman API Manager REST API</h1>
    <span style="color: #243446; font-size: 13px"><i class="fa fa-calendar"></i> May 19, 2015</span>
    <span style="color: #243446; margin-left: 15px; font-size: 13px"><i class="fa fa-user"></i> <a href="https://github.com/ldimaggi">Len DiMaggio</a></span>
    <span style="color: #243446; margin-left: 15px; font-size: 13px"><i class="fa fa-tags"></i> rest, api, and automation</span>
  </header>


  

  
    <!-- New Post -->
    <p class="bg-warning"
       style="margin-top:15px; padding: 10px;">
        Note: This is a redux of our blogpost for <b>apiman 1.2.x</b>. If you're still using <b>apiman 1.1.x</b>, you can refer to the <a href="
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
                http://apiman.io/blog/rest/api/automation/2015/05/19/rest-api.html
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
              
              
        
        ">older revision</a>.
    </p>
  

  <article class="post-content"
           style="margin-top: 20px; font-size: 14px; line-height: 20px">
    <p>In this, the third article in our series on apiman, JBoss’ new open source API Management framework, we’ll examine apiman’s API Manager REST API. apiman’s Management UI utilizes this API in the implementation for all of its user-visible features, and you can also use the same API to automate tasks with apiman.</p>

<!--more-->

<h2 id="introduction">Introduction</h2>

<p>It’s inevitable that, after you work with a product’s UI for a while that you encounter tasks that are better suited to a scripting or batch interface. For example, if you have to perform a similar task for a large of related data items, the time that it can require to perform these tasks through an interactive UI can be prohibitive. Also, it’s easy for repetitive tasks to become error prone as you can lose focus, even if you are working in a well designed and easy to use interface such as apiman.</p>

<p>One solution to this problem is to augment the UI with a command line or scripting interface. This can lead to a whole separate set of issues if the new interface is built on a different set of underlying routines than the UI. A better approach to allow access to the same routines in which the UI is constructed. This approach removes any duplication, and also enables you to replicate manual UI based tasks with automated or scripted tools.</p>

<p>JBoss apiman follows this second approach with its REST interface.  All the services provided by apiman in its Management UI are directly supported in the API Manager REST API. You can also directly access these same services through the REST API.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Like a lot of things with JBoss open source software, installing the REST API is easy. In fact, if you have apiman installed, then you already have the REST API installed. (You can’t get much easier than that!)</p>

<p>We covered installing apiman in the first article in this series (see: http://java.dzone.com/articles/impatient-new-users), so we won’t repeat that information here. A minimal set of install instructions are always available on the apiman site (http://www.apiman.io/latest/). The current set of instructions as of this writing are:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir ~/apiman-1.1.2.Final  
<span class="nb">cd</span> ~/apiman-1.1.2.Final  
wget http://download.jboss.org/wildfly/8.2.0.Final/wildfly-8.2.0.Final.zip  
wget http://downloads.jboss.org/apiman/1.1.2.Final/apiman-distro-wildfly8-1.1.2.Final-overlay.zip  
unzip wildfly-8.2.0.Final.zip  
unzip -o apiman-distro-wildfly8-1.1.2.Final-overlay.zip -d wildfly-8.2.0.Final  
<span class="nb">cd </span>wildfly-8.2.0.Final  
./bin/standalone.sh -c standalone-apiman.xml</code></pre></div>

<p>Now that our apiman server is up and running, we can start to access the API Manager REST API. However, before we start placing calls to APIs through the REST API, let’s take a look at how the API is organized.</p>

<h2 id="the-organization-of-the-api">The Organization of the API</h2>

<p>The documentation for the apiman REST API is available (for free, of course), here: http://www.apiman.io/latest/api-manager-restdocs.html</p>

<p>The services and their endpoints represented in the API are divided into these groups:</p>

<ul>
  <li>
    <p>actions - The actions endpoint (http://localhost:8080/apiman/actions/) enables you to execute actions for apiman entities (such as plans, APIs, applications, etc.)</p>
  </li>
  <li>
    <p>system/status - The system/status endpoint (http://localhost:8080/apiman/system/status) enables you to query the current state of the apiman system.</p>
  </li>
  <li>
    <p>currentuser - The currentuser endpoint (http://localhost:8080/apiman/currentuser/info) enables you to obtain or update information about the current user. This information is related to the user’s applications, APIs, organizations, etc.</p>
  </li>
  <li>
    <p>gateways - The gateways endpoint (http://localhost:8080/apiman/gateways/) enables you to obtain information about an API Gateway, and to delete or create new gateways.</p>
  </li>
  <li>
    <p>organizations - The organizations endpoint (http://localhost:8080/apiman/organizations/) enables you to obtain information about existing organizations and to create new organizations.</p>
  </li>
  <li>
    <p>permissions - The permissions endpoint (http://localhost:8080/apiman/permissions/) enables you to obtain information about user’s permissions.</p>
  </li>
  <li>
    <p>plugins - The plugins endpoint (http://localhost:8080/apiman/plugins/) enables you to obtain information about installed plugins, and to install new plugins.</p>
  </li>
  <li>
    <p>policyDefs - The policyDefs endpoint (http://localhost:8080/apiman/policyDefs/) enables you to obtain information about existing policy definitions, and to define new policy definitions.</p>
  </li>
  <li>
    <p>roles - The roles endpoint (http://localhost:8080/apiman/roles/) enables you to obtain information about existing roles, update roles, and delete roles.</p>
  </li>
  <li>
    <p>search - The search endpoint (http://localhost:8080/apiman/search/) enables you to search for applications, organizations, or APIs.</p>
  </li>
  <li>
    <p>users - The users endpoint (http://localhost:8080/apiman/users/) enables you to search for information about users, including their applications and APIs.</p>
  </li>
</ul>

<p>Within each group, GET operations are defined to return information, and GET and POST operations are defined to make changes to apiman elements. Data passed to and returned from services through the API is in the form of JSON along with a return code.</p>

<h2 id="accessing-apis-in-the-api-manager-rest-api">Accessing APIs in the API Manager REST API</h2>

<p>The best way to learn about the API Manager REST API is to see it in action. Since these are REST APIs, it’s easy to access them. For example, we should be able to access the system status service with a simple GET operation at this endpoint:</p>

<p>http://localhost:8080/apiman/system/status</p>

<p>Let’s try this with curl. If we execute the following command, we should see the current system status:</p>

<pre><code>curl -X GET http://localhost:8080/apiman/system/status
</code></pre>

<p>Well, that error is not exactly what we expected. There was no output.</p>

<p>What went wrong? What’s missing? The answer is that our call to the API was missing authorization. In the same way that a user must login and be authorized to use the apiman Management UI, calls to the REST API must be authorized.</p>

<p>For our example, we’ll keep things simple and stick to using basic authorization. (We’ll take a more extensive look at apiman and security in a later article in this series.)</p>

<p>In order to resolve this failure, we have to send a properly encoded basic authorization header with every request you make. In Java8, we can generate a key by base64 encoding this string for the OOTB admin username and password: admin:admin123! with this statememt:</p>

<pre><code>base64encode(concat('admin', ':', 'admin123!'))
</code></pre>

<p>This yields a key with a value of: YWRtaW46YWRtaW4xMjMh</p>

<p>Now, let’s try that curl command again, but this time, we’ll include the key in the authorization header:</p>

<pre><code>$ curl -H "Authorization: Basic YWRtaW46YWRtaW4xMjMh"
http://localhost:8080/apiman/system/status
</code></pre>

<p>And the result is:</p>

<pre><code>{"up":true,"version":"1.1.2-SNAPSHOT"}
</code></pre>

<p>As we mentioned earlier in this article, the responses returned by calls to the REST API are in in the form of JSON. In the case of our call to the http://localhost:8080/apiman/system/status endpoint, the expected format of the response is:</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="err">version</span> <span class="err">:</span> <span class="err">string</span>
    <span class="err">up</span> <span class="err">:</span> <span class="err">boolean</span>
<span class="p">}</span></code></pre></div>

<p>Let’s carry on by looking at a more extensive example, where we use the REST API to automate a task that would be tedious if performed in the apiman Management UI.</p>

<h2 id="a-larger-example">A Larger Example</h2>

<p>Let’s say that you want to create multiple new organizations. You could of course manually enter these into the apiman Management UI. But, if you have a large number of organizations, for example, one for each of the countries in the EU, or each of the states in the USA, this would be a tedious and error prone task. This is an ideal candidate task for automation with the REST API.</p>

<p>The coding for this example is simple. All you have to do is account for the encoding of the authorization to access the API Manager REST API, and pass the information related to each organization that you create to this endpoint: http://localhost:8080/apiman/organizations</p>

<p>Here’s an example program with an ice hockey flavor - the highlights are noted below:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="lineno"> 1</span> <span class="kn">package</span> <span class="n">apimanExample</span><span class="o">;</span>
<span class="lineno"> 2</span> <span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>  
<span class="lineno"> 3</span> <span class="kn">import</span> <span class="nn">java.io.OutputStreamWriter</span><span class="o">;</span>  
<span class="lineno"> 4</span> <span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>  
<span class="lineno"> 5</span> <span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>  
<span class="lineno"> 6</span> <span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>  
<span class="lineno"> 7</span> <span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>  
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimplePutOrg</span> <span class="o">{</span>  
<span class="lineno">10</span> 
<span class="lineno">11</span>     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>  
<span class="lineno">12</span> 
<span class="lineno">13</span>         <span class="n">String</span> <span class="o">[</span> <span class="o">]</span> <span class="o">[</span> <span class="o">]</span> <span class="n">originalSix</span> <span class="o">=</span> <span class="o">{</span>  
<span class="lineno">14</span>             <span class="o">{</span> <span class="s">"Boston"</span><span class="o">,</span> <span class="s">"Chicago"</span><span class="o">,</span> <span class="s">"Detroit"</span><span class="o">,</span> <span class="s">"Montreal"</span><span class="o">,</span> <span class="s">"New York"</span><span class="o">,</span> <span class="s">"Toronto"</span><span class="o">},</span>  
<span class="lineno">15</span>             <span class="o">{</span> <span class="s">"Bruins"</span><span class="o">,</span> <span class="s">"BlackHawks"</span><span class="o">,</span> <span class="s">"Red Wings"</span><span class="o">,</span> <span class="s">"Canadiens"</span><span class="o">,</span> <span class="s">"Rangers"</span><span class="o">,</span> <span class="s">"Maple Leafs"</span><span class="o">}</span>  
<span class="lineno">16</span>         <span class="o">};</span>
<span class="lineno">17</span>         <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>  
<span class="lineno">18</span>             <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span> <span class="o">(</span><span class="s">"Creating new apiman org for: "</span> <span class="o">+</span> <span class="n">originalSix</span> <span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">originalSix</span> <span class="o">[</span><span class="mi">1</span><span class="o">][</span><span class="n">i</span><span class="o">]);</span>  
<span class="lineno">19</span>             <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span> <span class="o">(</span><span class="s">"Return code = "</span> <span class="o">+</span> <span class="n">createNewOrg</span> <span class="o">(</span><span class="n">originalSix</span> <span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="n">i</span><span class="o">],</span> <span class="n">originalSix</span> <span class="o">[</span><span class="mi">1</span><span class="o">][</span><span class="n">i</span><span class="o">]));</span>  
<span class="lineno">20</span>         <span class="o">}</span>
<span class="lineno">21</span>     <span class="o">}</span>  
<span class="lineno">22</span> 
<span class="lineno">23</span>     <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">createNewOrg</span> <span class="o">(</span><span class="n">String</span> <span class="n">newOrgName</span><span class="o">,</span> <span class="n">String</span> <span class="n">newOrgDescription</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>  
<span class="lineno">24</span>         <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">URL</span><span class="o">(</span><span class="s">"http://localhost:8080/apiman/organizations"</span><span class="o">);</span>  
<span class="lineno">25</span>         <span class="n">HttpURLConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>  
<span class="lineno">26</span> 
<span class="lineno">27</span>         <span class="n">Base64</span><span class="o">.</span><span class="na">Encoder</span> <span class="n">encoder</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">();</span>  
<span class="lineno">28</span>         <span class="n">String</span> <span class="n">normalString</span> <span class="o">=</span> <span class="s">"admin:admin123!"</span><span class="o">;</span>  
<span class="lineno">29</span>         <span class="n">String</span> <span class="n">encodedString</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="na">encodeToString</span><span class="o">(</span><span class="n">normalString</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="n">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>  
<span class="lineno">30</span> 
<span class="lineno">31</span>         <span class="n">connection</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Basic "</span>  <span class="o">+</span> <span class="n">encodedString</span><span class="o">);</span>  
<span class="lineno">32</span>         <span class="n">connection</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>  
<span class="lineno">33</span>         <span class="n">connection</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>  
<span class="lineno">34</span>         <span class="n">connection</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>  
<span class="lineno">35</span>         <span class="n">connection</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>  
<span class="lineno">36</span> 
<span class="lineno">37</span>         <span class="n">OutputStreamWriter</span> <span class="n">osw</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">OutputStreamWriter</span><span class="o">(</span><span class="n">connection</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>  
<span class="lineno">38</span>         <span class="n">osw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"{\"name\":\""</span> <span class="o">+</span> <span class="n">newOrgName</span> <span class="o">+</span> <span class="s">" a new org\",\"description\":\""</span> <span class="o">+</span> <span class="n">newOrgDescription</span> <span class="o">+</span> <span class="s">"\"}"</span><span class="o">));</span>  
<span class="lineno">39</span>         <span class="n">osw</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>  
<span class="lineno">40</span>         <span class="n">osw</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
<span class="lineno">41</span> 
<span class="lineno">42</span>         <span class="k">return</span> <span class="n">connection</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="lineno">43</span>     <span class="o">}</span>  
<span class="lineno">44</span> <span class="o">}</span></code></pre></div>

<p>Code highlights:</p>

<ul>
  <li>Lines 13-16: Here’s where we define the test data. For this example, we’ll use the National Hockey League’s “original 6” teams.</li>
  <li>Line 24: Here’s the URL for the service to which we’ll connect to create the new organizations.</li>
  <li>Lines 27-29 - Here’s where we set up the encoding for the BASIC authorization.</li>
  <li>Lines 31-35 - And here’s where we create the HttpURLConnection that we will use to connect to the service.</li>
  <li>Line 32: Note that we will be performing a POST operation.</li>
  <li>Lines 37-40 - And finally, here’s where we connect to the service and send our POST requests to create the new organizations.</li>
</ul>

<p>When we run this example, the following output indicates that the calls to the service through the REST API were successful, based on the return code of 200:</p>

<pre><code>Creating new apiman org for: Boston:Bruins  
Return code = 200  
Creating new apiman org for: Chicago:BlackHawks  
Return code = 200  
Creating new apiman org for: Detroit:Red Wings  
Return code = 200  
Creating new apiman org for: Montreal:Canadiens  
Return code = 200  
Creating new apiman org for: New York:Rangers  
Return code = 200  
Creating new apiman org for: Toronto:Maple Leafs  
Return code = 200  
</code></pre>

<p>And - here’s the server output that tracks the creation of the new organizations:</p>

<pre><code>21:17:53,205 INFO [stdout] (default task-19) Created organization Boston a new org: OrganizationBean [id=Bostonaneworg, name=Boston a new org, description=Bruins, createdBy=admin, createdOn=Sun May 17 21:17:53 GMT-05:00 2015, modifiedBy=admin, modifiedOn=Sun May 17 21:17:53 GMT-05:00 2015]  
21:17:53,233 INFO [stdout] (default task-21) Created organization Chicago a new org: OrganizationBean [id=Chicagoaneworg, name=Chicago a new org, description=BlackHawks, createdBy=admin, createdOn=Sun May 17 21:17:53 GMT-05:00 2015, modifiedBy=admin, modifiedOn=Sun May 17 21:17:53 GMT-05:00 2015]  
21:17:53,253 INFO [stdout] (default task-23) Created organization Detroit a new org: OrganizationBean [id=Detroitaneworg, name=Detroit a new org, description=Red Wings, createdBy=admin, createdOn=Sun May 17 21:17:53 GMT-05:00 2015, modifiedBy=admin, modifiedOn=Sun May 17 21:17:53 GMT-05:00 2015]  
21:17:53,275 INFO [stdout] (default task-25) Created organization Montreal a new org: OrganizationBean [id=Montrealaneworg, name=Montreal a new org, description=Canadiens, createdBy=admin, createdOn=Sun May 17 21:17:53 GMT-05:00 2015, modifiedBy=admin, modifiedOn=Sun May 17 21:17:53 GMT-05:00 2015]  
21:17:53,295 INFO [stdout] (default task-27) Created organization New York a new org: OrganizationBean [id=NewYorkaneworg, name=New York a new org, description=Rangers, createdBy=admin, createdOn=Sun May 17 21:17:53 GMT-05:00 2015, modifiedBy=admin, modifiedOn=Sun May 17 21:17:53 GMT-05:00 2015]  
21:17:53,316 INFO [stdout] (default task-29) Created organization Toronto a new org: OrganizationBean [id=Torontoaneworg, name=Toronto a new org, description=Maple Leafs, createdBy=admin, createdOn=Sun May 17 21:17:53 GMT-05:00 2015, modifiedBy=admin, modifiedOn=Sun May 17 21:17:53 GMT-05:00 2015]  
</code></pre>

<p>And finally, here are the organizations as displayed in the apiman Management UI:</p>

<p><img src="/blog/images/2015-05-19/new-organizations.png" alt="new organizations" /></p>

<p>(It’s been a tough year for Boston Bruins’ fans. It’s nice to see the team listed first, even if it’s just an alphabetic list.  ;-)</p>

<h2 id="in-conclusion">In Conclusion</h2>

<p>The architecture of the apiman Management UI is that the UI is built on top of a REST API. This architecture makes it possible for you to directly access the services exposed by the API, and enables you to automate the tasks that you perform in the UI.</p>

  </article>

</div>

      </div>
      <div class="blog-footer">
        <footer role="contentinfo">
    <div id="inner-footer" class="clearfix row">
        <div id="widget-footer" class="clearfix">
            <hr>
            <div class="widget col-sm-6 col-md-6 widget_text">
                <div class="textwidget">
                    <p>
                        Copyright &copy; 2016 Red Hat, Inc. All rights reserved.<br>
                        apiman code is open source and released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html" rel="nofollow" target="_blank">Apache License, v2.0</a>.<br>
                        <a href="/latest/disclosure.html">Open Source Disclosure</a>
                    </p>
                </div>
            </div>
            <div class="widget col-sm-6 col-md-6 widget_text" style="text-align: right">
                <a href="http://www.redhat.com" rel="nofollow" target="_blank"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png" alt="Red Hat"></a>
            </div>
        </div>
        <nav class="clearfix"></nav>
    </div>

    <!-- Adobe Analytics -->
    <script src="//www.redhat.com/j/s_code.js" />
    <script>
        /**
         * Adobe Analytics
         *
         * Variables reported to Adobe Analytics:
         *  -pageName
         *  -server
         *  -channel
         *  -first minor section
         *  -second minor section (if available)
         *  -third minor section (if available)
         *  -full URL (domain + path + query string)
         *  -base URL (domain + path)
         *  -language
         *  -country
         *
         */

        /**
         * Additional JS files to be loaded BEFORE adobe-analytics.js:
         *
         * - http://www.redhat.com/j/s_code.js
         *
         * Additional JS files to be loaded AFTER adobe-analytics.js
         *
         * - http://www.redhat.com/j/rh_omni_footer.js
         */


        (function() {

            // Load the path name, without its initial /
            var arr = location.pathname.substr(1, location.pathname.length).toLowerCase().split('/');
            // If the path ends in index.html or whitespace, trim the array
            if (arr[arr.length - 1] == "index.html" || arr[arr.length - 1] == "" ) {
                arr.pop();
            }

            /*
             * Assign values to Adobe Analytics properties
             */

            s.channel = "apiman | "; // The channel is our top level classification
            s.server = "apiman"; // The server is ???
            s.pageName = "apiman |  | " + (arr[arr.length -1] || "homepage"); // pageName is apiman | <Channel> | {page_name}. {page_name} has index.html removed
            s.prop2 = s.eVar22 = "en"; // prop2/eVar22 is the ISO 639-1 language code
            s.prop4 = s.eVar23 = encodeURI(location.search); //prop4/eVar23 is the query string of the page

            // Pad the array as needed, so we can shift away later
            for (var i = arr.length; i < 3; i++) {
                arr[i] = "";
            }

            s.prop14 = s.eVar27 = arr.shift(); // prop14/eVar27 is the first minor section (normally /{minor_section_1})
            s.prop15 = s.eVar28 = arr.shift(); // prop15/eVar28 is the second minor section (normally /a/{minor_section_2})
            s.prop16 = s.eVar29 = arr.shift(); // prop16/eVar29 is the third minor section (normally /a/b/{minor_section_3})
            s.prop21 = s.eVar18 = encodeURI(location.hostname+location.pathname).toLowerCase(); // prop21/eVar18 is the URL, less any query strings or fragments
        })();
    </script>
    <script src="//www.redhat.com/assets/js/tracking/rh_omni_footer.js"/>
</footer>

      </div>
    </div>
  </body>
</html>
