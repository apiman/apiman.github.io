<!doctype html><html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="theme-color" content="rgb(61, 94, 129)">
<title>Apiman - Customizing JBoss apiman Through Policy Plugins</title>
<link rel="manifest" href="/manifest.json">
<link rel="apple-touch-icon" href="/assets/manifest/icon-192x192.png">
<link rel="icon" type="image/png" href="/assets/manifest/icon-192x192.png">
<link rel="prefetch" href="/assets/styles/OpenSans.css" as="style">
<link rel="stylesheet" href="/assets/styles/OpenSans.css">
<link rel="stylesheet" href="/assets/styles/main.css?1771630802">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
<script src="https://code.jquery.com/jquery-3.6.1.slim.min.js" crossorigin="anonymous" async></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous" async></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous" defer></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js" defer></script>
<title>Customizing JBoss apiman Through Policy Plugins | Apiman</title>
<meta name="generator" content="Jekyll v4.4.1">
<meta property="og:title" content="Customizing JBoss apiman Through Policy Plugins">
<meta name="author" content="Len DiMaggio">
<meta property="og:locale" content="en_US">
<meta name="description" content="This is the second in a series of articles exploring API management with JBoss apiman. The first article was a general introduction to apiman for impatient users where in only 10 minutes we installed apiman, created users and organizations, and APIs, policies, contracts, and client apps. In this article, we&#8217;ll take the first step toward customizing apiman by creating new plugins to implement API policies.">
<meta property="og:description" content="This is the second in a series of articles exploring API management with JBoss apiman. The first article was a general introduction to apiman for impatient users where in only 10 minutes we installed apiman, created users and organizations, and APIs, policies, contracts, and client apps. In this article, we&#8217;ll take the first step toward customizing apiman by creating new plugins to implement API policies.">
<link rel="canonical" href="https://www.apiman.io/blog/custom-policies-redux/">
<meta property="og:url" content="https://www.apiman.io/blog/custom-policies-redux/">
<meta property="og:site_name" content="Apiman">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-03-06T10:22:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Customizing JBoss apiman Through Policy Plugins">
<meta name="twitter:site" content="@apiman_io">
<meta name="twitter:creator" content="@apiman_io">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Len DiMaggio","url":"https://github.com/ldimaggi"},"dateModified":"2015-03-06T10:22:00+00:00","datePublished":"2015-03-06T10:22:00+00:00","description":"This is the second in a series of articles exploring API management with JBoss apiman. The first article was a general introduction to apiman for impatient users where in only 10 minutes we installed apiman, created users and organizations, and APIs, policies, contracts, and client apps. In this article, we&#8217;ll take the first step toward customizing apiman by creating new plugins to implement API policies.","headline":"Customizing JBoss apiman Through Policy Plugins","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.apiman.io/blog/custom-policies-redux/"},"url":"https://www.apiman.io/blog/custom-policies-redux/"}</script>
<meta name="article:tag" content="plugins">
<meta name="og:article:tag" content="plugins">
<meta name="article:tag" content="policies">
<meta name="og:article:tag" content="policies">
<meta name="article:tag" content="development">
<meta name="og:article:tag" content="development">
<meta name="article:tag" content="maven">
<meta name="og:article:tag" content="maven">
<meta name="google-site-verification" content="_ILllw-J_4eyz0StWadyFz0021teANtSNJsDeN9waPE">
</head>
<body onload=hljs.highlightAll()>
<div class="content">
<div class="container-fluid" id="apiman-navbar">
<nav class="mx-auto d-flex flex-wrap py-3 navbar navbar-dark navbar-expand-lg justify-content-between mw-1200">
<a href="/" title="Return To Home" class="d-flex align-items-center text-decoration-none">
<svg id="apiman-logo-mono" height="40" viewBox="0 0 3007 607" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><title>Apiman Logo</title><path d="M950.593 49.784C912.432 18.245 856.743 2.48 783.472 2.48H590.53V606.5H718.611V391.678H773.556c74.918.0 132.695-17.211 173.312-51.657C987.505 305.6 1007.82 255.881 1007.82 190.874 1007.82 128.352 988.74 81.324 950.593 49.784zM849.172 263.381c-19.561 15.574-49.032 23.331-88.408 23.331H718.611V107.421h58.254C811.833 107.421 837.519 114.58 853.911 128.894c16.393 14.329 24.586 36.5 24.586 66.523C878.497 225.169 868.722 247.828 849.172 263.381z" style="fill:#fff;fill-rule:nonzero"/><rect x="1067.88" y="2.48" width="128.086" height="604.02" style="fill:#fff;fill-rule:nonzero"/><path d="M2891.35 288.379C2891.35 320.877 2894.64 454.873 2894.64 454.873L2632.3 2.485H2470.76V606.5H2585.2V322.263C2585.2 287.827 2581.08 149.569 2581.08 149.569L2843.82 606.5h162.79V2.48H2891.35V288.379z" style="fill:#fff;fill-rule:nonzero"/><path d="M2197.23.0l-272.6 522.385V2.48H1750.3L1598.67 464.367H1596.19L1453.25 2.48H1278.89V606.5h114.46V325.557C1393.35 293.339 1389.2 132.62 1389.2 132.62L1534.63 606.5h117.34l155.75-473.047S1806.28 256.287 1805.86 273.91C1805.45 291.552 1805.24 307.116 1805.24 320.611V606.5h220.51l71.04-143.78h175.83L2272.57 606.5h122.71V0H2197.23zM2272.63 355.314H2148.44s110.6-230.938 122.7-263.999L2272.62 91.114v264.2H2272.63z" style="fill:#fff;fill-rule:nonzero"/><g><path d="M232.295 605.909H231.954C235.79 599.873 243 588.017 243 588.017S239.187 511.071 251.92 486.886C258.215 474.935 278.992 465.334 286.143 453.883c21.335-34.166 55.394-100.06 55.849-135.831C342.271 296.622 315.216 236.601 315.216 236.601l-30.12 53.562S293.18 299.686 292.899 303.55C291.517 322.433 275.65 366.584 275.65 366.584L290.239 372.824 296.233 391.7S290.319 392.348 289.529 393.93C288.346 396.285 292.848 403.94 292.848 403.94s-24.53 12.222-31.302 7.839C253.397 406.503 255.467 388.988 252.699 370.732 248.078 340.298 242.052 305.47 242.194 304.662 242.94 300.475 250.919 290.124 250.919 290.124V277.89S258.861 162.927 272.622 156.259C280.207 152.583 323.184 153.171 367.242 159.971 367.242 159.971 370.882 153.309 370.067 151.138 368.683 147.455 356.599 143.007 356.599 143.007S350.341 109.116 365.717 95.974c14.541-12.433 47.494-1.095 48.087 9.67C415.299 132.837 415.77 164.829 425.529 173.442c16.408 14.483 36.629 17.223 44.936 27.432 18.545 22.797 17.006 75.628 15.843 116.481C486.199 321.226 494.259 326.459 494.838 330.288 496.722 342.747 495.393 369.033 491.632 390.896 488.61 408.472 484.019 423.188 478.267 425.563 471.651 428.295 450.493 418.587 450.493 418.587S454.521 411.782 453.47 409.681C452.771 408.279 447.523 407.696 447.523 407.696L451.621 391.815 462.415 385.867l-8.178-38.835c-11.407 55.937-20.948 79.243-23.681 106.342C430.101 457.913 431.879 467.104 431.255 471.638c-3.721 27.091-26.722 110.905-26.724 110.902L453.427 605.908H452.482L453.429 606.022H530.714v-604H315.762L0 606.022H231.956L232.295 605.909zm37.855.0L270.453 606.022h97.835L368.772 605.908H368.286C369.049 597.795 381.047 581.375 381.047 581.375S371.94 503.682 373.669 495.93C375.749 486.607 390.409 472.115 392.798 462.875 396.744 447.618 391.63 399.847 391.63 399.847s-47.929 55.921-65.256 73.299C323.367 476.164 316.245 481.132 313.67 484.525c-18.087 23.74-51.163 99.044-51.163 99.044L270.451 605.909H270.15z" style="fill:#fff;fill-rule:nonzero"/><path d="M389.514 302.191S397.258 254.837 397.748 238.79C398.112 226.915 393.05 191.501 393.05 191.501L384.498 173.894S391.428 173.076 396.75 173.894C401.69 174.654 406.131 177.412 406.131 177.412L396.071 190.997s13.886 36.203 16.649 48.792C416.356 256.348 421.715 307.227 421.715 307.227S416.894 314.501 415.065 316.758C412.451 319.981 403.705 328.862 403.705 328.862S399.126 317.753 397.232 314.23C395.539 311.08 389.514 302.191 389.514 302.191z" style="fill:#fff;fill-rule:nonzero"/></g></svg>
</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse flex-grow-0" id="navbarToggler">
<ul class="nav nav-pills flex-column flex-lg-row">
<li class="nav-item">
<a href="/download.html" class="nav-link" aria-current="page">Download</a>
<li class="nav-item">
<a href="/features.html" class="nav-link" aria-current="page">Features</a>
<li class="nav-item">
<a href="/blog" class="nav-link" aria-current="page">Blog</a>
<li class="nav-item">
<a href="https://www.apiman.io/apiman-docs/" class="nav-link" aria-current="page">Documentation</a>
<li class="nav-item">
<a href="/community.html" class="nav-link" aria-current="page">Community</a>
<li class="nav-item">
<a href="/support.html" class="nav-link" aria-current="page">Support</a>
</ul>
</div>
</nav>
</div>
<div class="container-fluid">
<div class="mw-1200 mx-auto my-5 row">
<aside class="col-lg-2 d-lg-block d-none">
<div class="list-group justify-content-center sticky-top ps-0" id="generic-sidebar">
<a href="https://www.github.com/apiman/apiman/issues" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-bug"></i> Found an Issue?
</a>
<a href="/changelog.html" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-book"></i> Changelog
</a>
<a href="https://www.github.com/apiman/apiman" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-github"></i> Source Code
</a>
<a href="https://www.github.com/apiman/apiman-plugins" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-plugin"></i> Apiman Plugins
</a>
<a href="https://www.github.com/apiman/apiman-docker" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-docker"></i> Docker Images
</a>
<a href="https://github.com/apiman/apiman/releases" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-clock"></i> Older Releases
</a>
<a href="https://github.com/orgs/apiman/discussions" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-chat-left-text"></i> Discussions
</a>
<a href="https://www.twitter.com/apiman_io" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-twitter"></i> Twitter
</a>
<a href="https://www.apiman.io/apiman-docs/migration-guide/latest/migrations.html" class="list-group-item list-group-item-action" target="_blank" rel="noopener">
<i class="bi bi-paper-plane"></i> Migration Guide
</a>
</div>
</aside>
<div class="col-lg-10 col-sm-12">
<main class="mw-900">
<article itemscope itemtype="https://schema.org/BlogPosting">
<h1 itemprop="headline">Customizing JBoss apiman Through Policy Plugins</h1>
<div class="text-secondary"><span itemprop="datePublished">06 March 2015</span> Â· <span itemprop="keywords">plugins, policies, development, maven</span></div>
<div class="d-flex py-2 mb-4 mt-3 border-top border-bottom mb-2" id="author-holder">
<img class="rounded-3 align-self-center" width="80rem" src="https://avatars.githubusercontent.com/u/642621" alt="Avatar for Len DiMaggio">
<div class="d-flex flex-column ms-2 justify-content-evenly">
<div class="text-secondary d-none d-sm-block">Quality engineering legend and prolific technical writer.</div>
<div class="fs-5">
<a class="link-dark" rel="author" href="https://github.com/ldimaggi" target="_blank" itemprop="author">Len DiMaggio</a>
<span class="apiman-title-secondary" style="white-space:nowrap">
<span class="d-none d-sm-inline">/</span>
Red Hat
<span class="d-none d-sm-inline">/</span>
</span>
<span style="white-space:nowrap">
<span><a class="link-secondary ps-1" href="https://github.com/ldimaggi" target="_blank"><i class="bi bi-globe"></i></a></span>
<span><a class="link-secondary ps-1" href="https://www.github.com/ldimaggi" target="_blank"><i class="bi bi-github"></i></a></span>
<span><a class="link-secondary ps-1" href="mailto:ldimaggi@redhat.com" target="_blank"><i class="bi bi-envelope-at-fill"></i></a></span>
</span>
</div>
</div>
</div>
<div class="blog-content" itemprop="articleBody">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is the second in a series of articles exploring API management with JBoss apiman. The first article
was a general introduction to apiman for impatient users where in only 10 minutes we installed apiman,
created users and organizations, and APIs, policies, contracts, and client apps. In this article,
we&#8217;ll take the first step toward customizing apiman by creating new plugins to implement API policies.
</div>
<div class="paragraph">
<p>The major new feature added to release 1.0.2 of apiman <a href="https://www.apiman.io/" class="bare">https://www.apiman.io/</a> is the ability to extend its features through a custom plugin framework. Since policies perform the most important apiman runtime operations, plugins that enable you to create new policies are the first type of plugins to be supported.
</div>
<div class="paragraph">
<p>In this article, we&#8217;ll examine all the steps that you must perform to create a new policy plugin, and then import it into apiman and configure an API to put it into use.
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this article, we&#8217;ll assume that you have completed all the steps in the first article in this series. The first article guides even the most impatient user through installing and using apiman.
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessing-the-example-plugins"><a class="anchor" href="#accessing-the-example-plugins"></a>Accessing the Example Plugins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Like all JBoss software, apiman provides functioning example code that you can use as a starting point for your own plugins. The easiest way to create and package an apiman is as a standard maven project packaged as a .war file.
</div>
<div class="paragraph">
<p>To download a copy of the example plugins, execute this git command:
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"> git clone https://github.com/apiman/apiman-plugins</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the git clone operation completes, you&#8217;ll have the source code for multiple example plugins. The exact set of plugins that you have downloaded may change, depending on when you download them, as more examples are always being added. For the purposes of this article, we&#8217;ll focus on the "config-policy" example plugin. This plugin demonstrates how a plugin can be used to set the value of properties in a message being processed by an API. Specifically, this plugin defines properties in the request and response headers and enables you to set their values to "true."
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements-for-a-plugin-implementation"><a class="anchor" href="#requirements-for-a-plugin-implementation"></a>Requirements for a Plugin Implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The easiest way that an apiman policy plugin can be build and packaged is as a standard maven project packaged as a .war file. There are just a few modifications that are required to convert a .war into a plugin.
</div>
<div class="paragraph">
<p>Let&#8217;s take a closer look at the files and directories that comprise the apiman config-policy plugin, and the changes that are needed to implement a plugin:
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text"> â”œ---pom.xml
 â””---src
 â””---main
 â”œ---apiman
 â”‚  â”œ---plugin.json
 â”‚  â””---policyDefs
 â”‚    â”œ---config-policyDef.json
 â”‚    â””---schemas
 â”‚  â””---config-policyDef.schema
 â””---java
 â””---io
 â””---apiman
 â””---plugins
 â””---config_policy
 â”œ---ConfigBean.java
 â””---ConfigPolicy.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>The most obvious difference is the addition of the "apiman" directory. This directory is used to contain the configuration files for the plugin. (In other words, the files that make the project a plugin.) The only project-wide configuration change that you have to make is to modify the plugin&#8217;s maven pom.xml file to include the apiman directory when the project is built. The following lines are added to the plugin&#8217;s pom.xml file:
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;resource&gt;
    &lt;directory&gt;src/main/apiman&lt;/directory&gt;
    &lt;targetPath&gt;META-INF/apiman&lt;/targetPath&gt;
    &lt;filtering&gt;true&lt;/filtering&gt;
&lt;/resource&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result of these statements in the pom.xml file is that the contents of the apiman directory are included in the project build&#8217;s META-INF directory. (We&#8217;ll take a look at this later when we build the plugin project.) Setting filtering to true enables maven property expansion during the creation of the plugin war file.
Configuration files for the plugin are contained in the apiman directory. The primary configuration file is the "plugin.json" file. This file is required for all apiman plugins, regardless of the plugin type. The meta-data contained in this file describes the plugin and is displayed in the API Manager UI.
</div>
<div class="paragraph">
<p>Since our example is contributing a policy, it must contain a JSON file that defines the policy. This JSON file is contained in the apiman/policyDefs directory and is named "config-policyDef.json." This file defines the following fields for the policy:
</div>
<div class="ulist">
<ul>
<li>
<p><em>id</em> - A unique identifier for the policy
<li>
<p><em>name</em> - A user-friendly (in other words, a human-readable) name for the policy. This policy name is displayed in the API Manager UI
<li>
<p><em>description</em> - A description of the policy
<li>
<p><em>policyImpl</em> - This is the fully qualified classname name of the Java class that actually implements the policy. This value must be properly formatted to include information about the plugin, including placeholders for maven properties, for example, project version.
<li>
<p><em>icon</em> - This is the name of a Font Awesome icon <a href="https://fortawesome.github.io/Font-Awesome/" class="bare">https://fortawesome.github.io/Font-Awesome/</a> that is displayed for the Policy in the API Manager UI.
<li>
<p><em>formType</em> - The type of policy configuration UI form. Our example uses JsonSchema.
<li>
<p><em>form</em> - This is a relative path to the policy configuration UI form contained in the plugin. Our examples uses the JSON Schema that defines the configuration data format. (More on this file in a minute.
</ul>
</div>
<div class="paragraph">
<p>In our example, the config-policyDef.json looks like this:
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id" : "config-policy",
  "name" : "Config Policy",
  "description" : "A policy used to showcase policy configuration.",
  "policyImpl" "plugin:${project.groupId}:${project.artifactId}:${project.version}:${project.packaging}/io.apiman.plugins.config_policy.ConfigPolicy",
  "icon" : "sliders",
  "formType" : "JsonSchema",
  "form" : "schemas/config-policyDef.schema"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We mentioned that since our example uses the JSON schema <a href="https://json-schema.org/documentation.html" class="bare">https://json-schema.org/documentation.html</a>, we have to also define the configuration data format. This is done in the policyDefs/schemas/config-policyDef.schema file. This file defines the format used in the policy configuration file data and is used by the API Manager UI to generate a form that is used to fill in the values to be used to configure the policy. In our example, the policy&#8217;s JSON schema defines two properties: requestHeader and responseHeader.
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "title" : "Configure HTTP Headers",
  "description" : "Set the HTTP request header to populate with the value 'true' when the request is made. Also set the HTTP response header to populate with the value 'true' after the response is received from the back-end API.",
  "type" : "object",
  "properties": {
   "requestHeader": {
    "title" : "Request Header",
    "type" : "string",
    "minLength" : 1,
    "maxLength" : 64
   },
   "responseHeader": {
    "title" : "Response Header",
    "type" : "string",
    "minLength" : 1,
    "maxLength" : 64
   }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>That finishes the description of the policy&#8217;s configuration files. To complete the policy plugin, the example also requires the Java implementation for the policy itself. The policy implementation is contained in the src/main/java/io/apiman/plugins/config_policy/ConfigPolicy.java file. The policy is very simple as it merely appends a header to the http request and response.
</div>
<div class="paragraph">
<p>Java policy classes must implement the apiman IPolicy interface. This example takes that a step further by actually extending the io.apiman.gateway.engine.policies.AbstractMappedPolicy class. By doing so, the policy Java code can take advantage of the AbstractMappedPolicy&#8217;s class use of the Jackson (<a href="https://github.com/FasterXML/jackson" class="bare">https://github.com/FasterXML/jackson</a>) JSON parser to parse the policy configuration data into a Java bean. (In this example, the bean is implemented in src/main/java/io/apiman/plugins/config_policy/ConfigBean.java.) If the policy implemented the IPolicy interface, instead of extending AbstractMappedPolicy, then the policy Java class would have to implement its own parser.
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-the-plugin-and-installing-it-into-the-maven-repo"><a class="anchor" href="#building-the-plugin-and-installing-it-into-the-maven-repo"></a>Building the Plugin and Installing it into the Maven Repo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Building the plugin with maven is easy. Just execute this command from the directory that contains the plugin&#8217;s pom.xml file.
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case you&#8217;re wondering why, we&#8217;re installing the plugin into the maven repo. The answer is simply that in the current release of apiman, the only supported install path is from the maven repo. Future releases of apiman will likely support additional installation paths.
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-a-plugin-into-apiman"><a class="anchor" href="#installing-a-plugin-into-apiman"></a>Installing a Plugin into apiman</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In apiman, a policy plugin, once installed, is available on a system-wide basis. Accordingly, plugins can only be installed by an admin user. After you login as admin, you&#8217;ll see this in the admin UI:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-1.png" alt="System Administration">
</div>
</div>
<div class="paragraph">
<p>After selecting "Manage Plugins," you&#8217;ll see a screen that looks like this:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-2.png" alt="Plugins">
</div>
</div>
<div class="paragraph">
<p>And, if you then select "Add Plugin," you&#8217;ll see this screen:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-3.png" alt="Add Plugin">
</div>
</div>
<div class="paragraph">
<p>The GroupId, ArtifactId, and Version information is all available in the example plugin&#8217;s pom.xml file:
</div>
<div class="ulist">
<ul>
<li>
<p><em>GroupId</em>: io.apiman.plugins
<li>
<p><em>ArtifactId</em>: apiman-plugins-config-policy
<li>
<p><em>Version</em>: 1.0.3-SNAPSHOT
</ul>
</div>
<div class="paragraph">
<p>After you enter this information for the plugin and click on "Add Plugin," you&#8217;ll see this displayed in the UI:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-4.png" alt="Plugins">
</div>
</div>
<div class="paragraph">
<p>Congratulations! The plugin is installed and is ready to be used! Let&#8217;s add it to an API and see it in action.
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-the-installed-plugin"><a class="anchor" href="#using-the-installed-plugin"></a>Using the Installed Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we have to log out of the admin account in the Admin UI and then log back in as the "serprov" API provider. Then, select our "echo" API, and create a new version of the API, based on the original version of the API:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-6.png" alt="New API Version">
</div>
</div>
<div class="paragraph">
<p>And, when you add a new policy to the API, you&#8217;ll see the example config API that we just installed:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-5.png" alt="Add Policy">
</div>
</div>
<div class="paragraph">
<p>When you select the Config Policy, you&#8217;ll be presented with a dialog where you can specify the values for the two properties defined in the policy:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-7.png" alt="Add Policy">
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s fill in some easy to remember values:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-8.png" alt="Add Policy">
</div>
</div>
<div class="paragraph">
<p>After adding the policy, you&#8217;ll see it displayed in the policies defined for the API:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman-9.png" alt="Add Policy">
</div>
</div>
<div class="paragraph">
<p>Then publish the API. In order to consume the API, login to the API Manager UI as the client app developer "appdev", and create a new client app that uses the new API. (We covered the creation of new client apps in detail in the first article in this series)
</div>
<div class="paragraph">
<p>And when the API is invoked, you&#8217;ll see something like this:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman99.png" alt="REST Client">
</div>
</div>
<div class="paragraph">
<p>And this:
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/blog/2015-03-06/apiman100.png" alt="REST Client">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="in-conclusion"><a class="anchor" href="#in-conclusion"></a>In Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OK, let&#8217;s recap. apiman is a rapidly growing and developing project. Each new release brings new features. In release 1.0.2, it became possible for users to contribute custom policies into their apiman installation through the API Manager UI.
</div>
</div>
</div>
</div>
</article>
</main>
</div>
</div>
</div>
<footer id="apiman-footer" class="p-2 mt-2 mx-auto mw-1350">
<p>
Apiman code is open source and licensed under the <a class="link-dark" href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener">Apache License, v2.0</a>.
<p>The Apiman project was started by Red Hat, although they are no longer directly involved in the project. The project is actively maintained by the community.
<p>Copyright Â© 2022 Apiman Community & <a class="link-dark" href="https://www.redhat.com/en/about/terms-use" target="_blank" rel="noopener">Red Hat</a>.
<p>
Website was created with ðŸ–¤ by Marc Savy of <a class="footer-href" href="https://www.blackparrotlabs.io" target="_blank" rel="noopener">Black Parrot Labs</a> using <a class="footer-href" href="https://www.jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> and <a class="footer-href" href="https://www.getbootstrap.com" target="_blank" rel="noopener">Bootstrap</a>,
and contributed to the Apiman community under the <a class="link-dark" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a> license.
</footer>
</div>
<script>window.onload=function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.async=!0,e.src="/sw-register.js?v="+Date.now(),t.parentNode.insertBefore(e,t)}</script>
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TRD82LC9Y2")</script>
</body>
</html>