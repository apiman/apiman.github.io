this.workbox=this.workbox||{},this.workbox.broadcastUpdate=function(e,t,n,s,o,i,a){"use strict";try{self["workbox:broadcast-update:5.1.4"]&&_()}catch{}const r=(e,t,n)=>{if(!(e instanceof Response&&t instanceof Response))throw new i.WorkboxError("invalid-responses-are-same-args");const s=n.some(n=>e.headers.has(n)&&t.headers.has(n));return s?n.every(n=>{const s=e.headers.has(n)===t.headers.has(n),o=e.headers.get(n)===t.headers.get(n);return s&&o}):(o.logger.warn(`Unable to determine where the response has been updated `+`because none of the headers that would be checked are present.`),o.logger.debug(`Attempting to compare the following: `,e,t,n),!0)},l="CACHE_UPDATED",d="workbox-broadcast-update",u=["content-length","etag","last-modified"],h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function m(e){return{cacheName:e.cacheName,updatedURL:e.request.url}}class c{constructor({headersToCheck:e,generatePayload:t}={}){this._headersToCheck=e||u,this._generatePayload=t||m}async notifyIfUpdated(e){if(t.assert.isType(e.cacheName,"string",{moduleName:"workbox-broadcast-update",className:"BroadcastCacheUpdate",funcName:"notifyIfUpdated",paramName:"cacheName"}),t.assert.isInstance(e.newResponse,Response,{moduleName:"workbox-broadcast-update",className:"BroadcastCacheUpdate",funcName:"notifyIfUpdated",paramName:"newResponse"}),t.assert.isInstance(e.request,Request,{moduleName:"workbox-broadcast-update",className:"BroadcastCacheUpdate",funcName:"notifyIfUpdated",paramName:"request"}),!e.oldResponse)return;if(!r(e.oldResponse,e.newResponse,this._headersToCheck)){o.logger.log(`Newer response found (and cached) for:`,e.request.url);const t={type:l,meta:d,payload:this._generatePayload(e)};if(e.request.mode==="navigate"){let t;e.event instanceof FetchEvent&&(t=e.event.resultingClientId);const o=await s.resultingClientExists(t);(!o||h)&&await n.timeout(3500)}const i=await self.clients.matchAll({type:"window"});for(const e of i)e.postMessage(t)}}}class f{constructor(e){this.cacheDidUpdate=async e=>{a.dontWaitFor(this._broadcastUpdate.notifyIfUpdated(e))},this._broadcastUpdate=new c(e)}}return e.BroadcastCacheUpdate=c,e.BroadcastUpdatePlugin=f,e.responsesAreSame=r,e}({},workbox.core._private,workbox.core._private,workbox.core._private,workbox.core._private,workbox.core._private,workbox.core._private)